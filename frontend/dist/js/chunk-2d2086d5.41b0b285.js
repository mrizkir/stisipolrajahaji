(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2086d5"],{a56a:function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return a.userlogged?t("div",{staticClass:"login-box"},[t("div",{staticClass:"login-logo"},[t("b-link",{attrs:{to:"/"}},[a._v("PortalEkampusV2")])],1),t("b-card",{staticClass:"login-card-body"},[t("p",{staticClass:"login-box-msg"},[a._v("Silahkan masukan username dan password")]),t("b-form",{attrs:{name:"frmlogin",id:"frmlogin"},on:{submit:function(e){return e.preventDefault(),a.onSubmit.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Username:","label-for":"txtUsername"}},[t("b-form-input",{attrs:{id:"txtUsername",placeholder:"Masukan username",state:a.validateState("username"),"aria-describedby":"frmlogin-username"},model:{value:a.v$.formdata.username.$model,callback:function(e){a.$set(a.v$.formdata.username,"$model",e)},expression:"v$.formdata.username.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"frmlogin-username"}},[a._v(" Username tidak boleh kosong, silahkan diisi !!!. ")])],1),t("b-form-group",{attrs:{label:"Password:","label-for":"txtPassword"}},[t("b-form-input",{attrs:{id:"txtPassword",placeholder:"Masukan password",type:"password",state:a.validateState("password"),"aria-describedby":"frmlogin-password"},model:{value:a.v$.formdata.password.$model,callback:function(e){a.$set(a.v$.formdata.password,"$model",e)},expression:"v$.formdata.password.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"frmlogin-password"}},[a._v(" Password tidak boleh kosong, silahkan diisi !!!. ")])],1),t("b-form-group",{attrs:{label:"Halaman:","label-for":"selectPage"}},[t("b-form-select",{attrs:{id:"selectPage",options:a.daftar_page,state:a.validateState("page"),"aria-describedby":"frmlogin-page"},model:{value:a.v$.formdata.page.$model,callback:function(e){a.$set(a.v$.formdata.page,"$model",e)},expression:"v$.formdata.page.$model"}}),t("b-form-invalid-feedback",{attrs:{id:"frmlogin-page"}},[a._v(" Silahkan pilih akan mengakses halaman apa ? ")])],1),t("div",{staticClass:"buttons-w"},[t("b-button",{attrs:{type:"submit",disabled:a.v$.formdata.$invalid||a.btnLoading,variant:"primary",block:""}},[a._v(" Login ")]),t("b-alert",{staticClass:"mt-2",attrs:{show:a.form_error,variant:"danger"}},[a._v(" Username atau Password tidak dikenal !!! ")])],1)],1)],1)],1):a._e()},s=[],o=t("1da1"),n=(t("96cf"),t("25a0")),i=t("e3e1"),d={name:"Login",setup:function(){return{v$:Object(n["a"])()}},created:function(){this.$store.getters["auth/Authenticated"]?this.$router.push("/dashboard/"+this.$store.getters["auth/AccessToken"]):this.$store.dispatch("uifront/init",this.$ajax)},data:function(){return{form_error:!1,userlogged:!0,btnLoading:!1,daftar_page:[{text:"Pilih Halaman",value:""},{text:"superadmin",value:"sa"},{text:"manajemen",value:"m"},{text:"pmb",value:"pmb"},{text:"keuangan",value:"k"},{text:"operator nilai",value:"on"},{text:"dosen",value:"d"},{text:"dosen wali",value:"dw"},{text:"mahasiswa",value:"mh"},{text:"mahasiswa baru",value:"mb"},{text:"alumni",value:"al"},{text:"orangtua wali",value:"ot"}],formdata:{username:null,password:null,page:""}}},validations:function(){return{formdata:{username:{required:i["b"]},password:{required:i["b"]},page:{required:i["b"]}}}},methods:{validateState:function(a){var e=this.v$.formdata[a],t=e.$dirty,r=e.$error;return t?!r:null},onSubmit:function(){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.v$.formdata.$invalid){e.next=5;break}return a.btnLoading=!0,a.form_error=!1,e.next=5,a.$ajax.post("/auth/login",{username:a.formdata.username,password:a.formdata.password,page:a.formdata.page}).then((function(e){var t=e.data;a.$ajax.get("/auth/me",{headers:{Authorization:t.token_type+" "+t.access_token}}).then((function(e){var r={token:t,user:e.data};a.$store.dispatch("auth/afterLoginSuccess",r)})),a.btnLoading=!1,a.userlogged=!1,a.$router.push("/dashboard/"+t.access_token)})).catch((function(){a.form_error=!0,a.btnLoading=!1}));case 5:case"end":return e.stop()}}),e)})))()}}},l=d,u=t("2877"),m=Object(u["a"])(l,r,s,!1,null,null,null);e["default"]=m.exports}}]);